<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#2196f3">
    <meta http-equiv="Content-Security-Policy" content="default-src * 'self' 'unsafe-inline' 'unsafe-eval' data: gap:">
    <title>Framework7</title>
    <link rel="stylesheet" href="../dist/css/framework7.min.css">
    <link rel="stylesheet" href="css/app.css">
    <link rel="apple-touch-icon" href="img/f7-icon-square.png">
    <link rel="icon" href="img/f7-icon.png">
</head>

<body>
<div id="app">
    <div class="statusbar"></div>
    <div class="panel panel-left panel-cover">
        <div class="page">
            <div class="page-content">
                <div class="block-title">Left Panel</div>
                <div class="block">
                    <p>This is a left side panel. You can close it by clicking outsite or on this link:
                        <a href="#" class="panel-close">close me</a>. You can put here anything, even another isolated
                        view like in
                        <a href="#" data-panel="right"
                           class="panel-open">Right Panel</a>
                    </p>
                </div>
                <div class="block-title">Main View Navigation</div>
                <div class="list links-list">
                    <ul>
                        <li>
                            <a href="/accordion/" class="panel-close">Accordion</a>
                        </li>
                        <li>
                            <a href="/action-sheet/" class="panel-close">Action Sheet</a>
                        </li>
                        <li>
                            <a href="/badge/" class="panel-close">Badge</a>
                        </li>
                        <li>
                            <a href="/buttons/" class="panel-close">Buttons</a>
                        </li>
                        <li>
                            <a href="/cards/" class="panel-close">Cards</a>
                        </li>
                        <li>
                            <a href="/checkbox/" class="panel-close">Checkbox</a>
                        </li>
                        <li>
                            <a href="/chips/" class="panel-close">Chips/Tags</a>
                        </li>
                        <li>
                            <a href="/contacts-list/" class="panel-close">Contacts List</a>
                        </li>
                        <li>
                            <a href="/data-table/" class="panel-close">Data Table</a>
                        </li>
                    </ul>
                </div>
                <div class="block">
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse faucibus mauris leo, eu
                        bibendum neque congue
                        non. Ut leo mauris, eleifend eu commodo a, egestas ac urna. Maecenas in lacus faucibus, viverra
                        ipsum pulvinar,
                        molestie arcu. Etiam lacinia venenatis dignissim. Suspendisse non nisl semper tellus malesuada
                        suscipit eu
                        et eros. Nulla eu enim quis quam elementum vulputate. Mauris ornare consequat nunc viverra
                        pellentesque. Aenean
                        semper eu massa sit amet aliquam. Integer et neque sed libero mollis elementum at vitae ligula.
                        Vestibulum
                        pharetra sed libero sed porttitor. Suspendisse a faucibus lectus.</p>
                    <p>Duis ut mauris sollicitudin, venenatis nisi sed, luctus ligula. Phasellus blandit nisl ut lorem
                        semper pharetra.
                        Nullam tortor nibh, suscipit in consequat vel, feugiat sed quam. Nam risus libero, auctor vel
                        tristique ac,
                        malesuada ut ante. Sed molestie, est in eleifend sagittis, leo tortor ullamcorper erat, at
                        vulputate eros sapien
                        nec libero. Mauris dapibus laoreet nibh quis bibendum. Fusce dolor sem, suscipit in iaculis id,
                        pharetra at
                        urna. Pellentesque tempor congue massa quis faucibus. Vestibulum nunc eros, convallis blandit
                        dui sit amet,
                        gravida adipiscing libero.</p>
                </div>
            </div>
        </div>
    </div>
    <div class="panel panel-right panel-reveal">
        <div class="view view-init view-right" name="right" data-url="/">
            <div class="page">
                <div class="navbar">
                    <div class="navbar-inner sliding">
                        <div class="title">Right Panel</div>
                    </div>
                </div>
                <div class="page-content">
                    <div class="block">
                        <p>This is a right side panel. You can close it by clicking outsite or on this link:
                            <a href="#" class="panel-close">close me</a>. You can put here anything, even another
                            isolated view.</p>
                    </div>
                    <div class="block-title">Panel Navigation</div>
                    <div class="list links-list">
                        <ul>
                            <li>
                                <a href="/panel-right-1/">Right panel page 1</a>
                            </li>
                            <li>
                                <a href="/panel-right-2/">Right panel page 2</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="view view-main view-init ios-edges" id="mainView" data-url="/">
        <div class="page">
            <div class="navbar">
                <div class="navbar-inner">
                    <div class="left">
                        <a href="#" class="link icon-only panel-open" data-panel="left">
                            <i class="icon f7-icons ios-only">menu</i>
                            <i class="icon material-icons md-only">menu</i>
                        </a>
                    </div>
                    <div class="title sliding">Framework7</div>
                    <div class="right">
                        <a class="link icon-only searchbar-enable" data-searchbar=".searchbar-components">
                            <i class="icon f7-icons ios-only">search_strong</i>
                            <i class="icon material-icons md-only">search</i>
                        </a>
                    </div>

                    <!--search components -->

                    <form data-search-container=".components-list" data-search-in="a"
                          class="searchbar searchbar-expandable searchbar-components searchbar-init">
                        <div class="searchbar-inner">
                            <div class="searchbar-input-wrap">
                                <input type="search" placeholder="Search components"/>
                                <i class="searchbar-icon"></i>
                                <span class="input-clear-button"></span>
                            </div>
                            <span class="searchbar-disable-button">Cancel</span>
                        </div>
                    </form>


                </div>
            </div>
            <div class="page-content">
                <div class="list searchbar-hide-on-search">
                    <ul>
                        <li>
                            <a class="item-content item-link" href="/about/">
                                <div class="item-media">
                                    <i class="icon icon-f7"></i>
                                </div>
                                <div class="item-inner">
                                    <div class="item-title">About Md. Sultanul Arefin</div>
                                </div>
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="block-title searchbar-found">Components</div>
                <div class="list components-list searchbar-found">
                    <ul>

                        <!--login screen-->
                        <li id="login_li">
                            <a class="item-content item-link" href="/login-screen/">
                                <div class="item-media">
                                    <i class="icon icon-f7"></i>
                                </div>
                                <div class="item-inner">
                                    <div class="item-title">Login Screen</div>
                                </div>
                            </a>
                        </li>


                        <li>
                            <a class="item-content item-link" href="/bookings-storage/">
                                <div class="item-media">
                                    <i class="icon icon-f7"></i>
                                </div>
                                <div class="item-inner">
                                    <div class="item-title">Bookings Storage</div>
                                </div>
                            </a>
                        </li>

                        <li>
                            <a class="item-content item-link" href="/yourbooking/">
                                <div class="item-media">
                                    <i class="icon icon-f7"></i>
                                </div>
                                <div class="item-inner">
                                    <div class="item-title">Your Booking</div>
                                </div>
                            </a>
                        </li>

                        <!--<li>-->
                        <!--<a class="item-content item-link" href="/book-vehicle/">-->
                        <!--<div class="item-media">-->
                        <!--<i class="icon icon-f7"></i>-->
                        <!--</div>-->
                        <!--<div class="item-inner">-->
                        <!--<div class="item-title">Book Vehicle</div>-->
                        <!--</div>-->
                        <!--</a>-->
                        <!--</li>-->

                        <!--<li>-->
                        <!--<a class="item-content item-link" href="/editbookings/">-->
                        <!--<div class="item-media">-->
                        <!--<i class="icon icon-f7"></i>-->
                        <!--</div>-->
                        <!--<div class="item-inner">-->
                        <!--<div class="item-title">Edit Bookings</div>-->
                        <!--</div>-->
                        <!--</a>-->
                        <!--</li>-->

                        <!--<li>-->
                        <!--<a class="item-content item-link" href="/vehiclebooking/">-->
                        <!--<div class="item-media">-->
                        <!--<i class="icon icon-f7"></i>-->
                        <!--</div>-->
                        <!--<div class="item-inner">-->
                        <!--<div class="item-title">Vehicle Booking</div>-->
                        <!--</div>-->
                        <!--</a>-->
                        <!--</li>-->

                    </ul>

                    <ul>
                        <li id="logout_action" style="visibility:hidden;">

                            <!--onclick="EditThis(' + onedata.bookings_id + ')" href="javascript:void(0)">'-->
                            <a class="item-content item-link" onclick="logout_function(+ app.data.user.userid +'')"
                               href="javascript:void(0)">
                                <div class="item-media">
                                    <i class="icon icon-f7"></i>
                                </div>
                                <div class="item-inner">
                                    <div class="item-title">Logout</div>
                                </div>
                            </a>
                        </li>
                    </ul>
                </div>
                <!--<div class="list simple-list searchbar-not-found">-->
                <!--<ul>-->
                <!--<li>Nothing found</li>-->
                <!--</ul>-->
                <!--</div>-->
                <!--<div class="block-title searchbar-hide-on-search">Themes</div>-->
                <!--<div class="list links-list searchbar-hide-on-search">-->
                <!--<ul>-->
                <!--<li>-->
                <!--<a href="./index.html?theme=ios" class="external">iOS Theme</a>-->
                <!--</li>-->
                <!--<li>-->
                <!--<a href="./index.html?theme=md" class="external">Material (MD) Theme</a>-->
                <!--</li>-->
                <!--<li>-->
                <!--<a href="/color-themes/">Color Themes</a>-->
                <!--</li>-->
                <!--</ul>-->
                <!--</div>-->
                <!--<div class="block-title searchbar-hide-on-search">Page Loaders & Router</div>-->
                <!--<div class="list links-list searchbar-hide-on-search">-->
                <!--<ul>-->
                <!--<li>-->
                <!--<a href="/page-loader-template7/vladimir/123/about-me/1/?start=0&end=30#top">Template7-->
                <!--Page</a>-->
                <!--</li>-->
                <!--<li>-->
                <!--<a href="/page-loader-component/vladimir/123/about-me/1/?start=0&end=30#top">Component-->
                <!--Page</a>-->
                <!--</li>-->
                <!--<li>-->
                <!--<a href="/load-something-that-doesnt-exist/">Default Route (404)</a>-->
                <!--</li>-->
                <!--</ul>-->
                <!--</div>-->
            </div>
        </div>
    </div>
</div>
<script src="../dist/js/framework7.min.js"></script>

<script src="js/routes.js"></script>
<script src="js/app.js"></script>
<script src="js/jquery-3.2.1.js"></script>


<script>
    // A $( document ).ready() block.

    // $(document).ready(function () {
    //     console.log("ready at index.html!");
    // });

    // noinspection JSAnnotator

    var $ = this.$;

    // no need requres when accessing html pages in ./pages section.
    // var app = this.$app;
    //var app = new Framework7();


    var $$ = Dom7;


    // console.log($$);


    // console.log("app.data: ");
    // console.log(app.data);


    // Fruits data demo array
    // var fruits = ('Apple Apricot Avocado Banana Melon Orange Peach Pear Pineapple').split(' ');

    // var alldata = [];


    var selection = {
        id: 0,
        selectedText: "Doe",
        selectedValue: 0,
        autocompleteId: ""
    };

    var selectedChoices = [];

    // console.log("selectedChoices.length: ");

    // console.log(selectedChoices.length);


    var destinatinoLocations;
    var destinationvalues = [];
    var destinationResults = [];

    var cars;
    var carnames = [];
    var carResuls = [];

    var pickUpLocations;
    var pickUpLocationValues = [];
    var pickUpResults = [];


    // function loadDestination() {
    //
    //     console.log("at loadDestination ")


    // console.log(mainView);

    function logout_function(id) {


        console.log(id);
    }


    function EditThis(id) {


        app.data.bookings.id = parseInt(id);

        console.log(id);

        // alert(id);


        // BOTH OF THEM WORKS
        app.views.main.router.navigate('/editbookings/', history = true);


        // return app.router.navigate('/editbookings/',history=false);


        // mainView.loadPage('/editbookings/');


        // return app.router.navigate('/editbookings/');

        // console.log(id);
        // console.log("At yourbooking.html in index.html");

    }


    function DeleteThis(id) {


        app.dialog.confirm('<b>Are you sure you want to delete this booking?</b>', 'Delete Booking', function () {


                var table = "bookings";
                // var userid = app.data.user.userid;

                // var userid = 1;

                id = parseInt(id);

                // var id = number(id);

                alert(id);

                console.log(id);


                app.request.post('../removebooking.php', {
                        id: id,
                        table: table,
                    }, function (data) {


                        console.log(data);


                        x = JSON.parse(data);

                        var message = x.message;
                        if (x.value === 1) {


                            app.dialog.alert('<b>Deletion succeded please refresh the page to see the result.</b>', 'Delete Booking succeed', function () {
                                return app.router.navigate('/yourbooking/');


                            });
                        }

                        else {
                            console.log("error in index.html line 373 removebooking");
                        }
                    },
                    function (data) {
                        console.log("error");

                    }
                );

            },
            function () {


                app.dialog.alert('<b>Deletion cancelled</b>', 'Delete Booking', function () {
                    return app.router.navigate('/yourbooking/');

                });

            });


    };


    function InsertBooking() {


        // DOESN'T WORK THESE BELOW
        // var replyText = $('#passangers').val();
        //
        // console.log(replyText);


        // This one works
        var passanger_number = parseInt($$('#passangers').val());

        // console.log(passanger_number);

        var returnDate = $$('#returnDate').val();

        // console.log(returnDate );

        // name="testTextValueAjax" type="text" id="testajax"
        // var keyvalue = $$('#testajax').val();

        // console.log(keyvalue);

        // app.form.storeFormData

        // var formData1 = app.form.getFormData('my-form')
        // alert(JSON.stringify(formData1));

        // console.log("console.log: ");

        console.log(selectedChoices);

        // console.log(typeof selectedChoices);

        var ddldata = JSON.stringify(selectedChoices);

        // console.log(ddldata);

        // app.dialog.alert('Final: !');


        // $$('#anim').css({left: left + 'px'})
        // animId = app.utils.requestAnimationFrame(anim);
        // console.log("LOG");

        var table = "bookings";
        var userid = parseInt(app.data.user.userid) === 0 ? 1 : app.data.user.userid;


        app.request.post('../authenticate.php/', {
                userdata: userdata,
            }, function (success) {

                console.log(success);

                return app.views.main.router.navigate('/login/');
            },
            function (error) {
                console.log("error");

            });


        // app.request.post('../ReserveVehicle.php/', {
        //         table: table,
        //         data: ddldata,
        //         date: returnDate,
        //         passangerNumber: passanger_number,
        //         userid: userid,
        //     }, function (reserveData) {
        //
        //
        //         console.log(reserveData);
        //         var x = JSON.parse(reserveData);
        //
        //
        //         if (x.value === 1) {
        //
        //             console.log(selectedChoices[0]);
        //
        //             app.dialog.alert('<b>Congratulatoin, ' + app.data.user.userEmail + '  have Successfully made reservation of the vehicle </b>'
        //                 + selectedChoices[2].selectedText +
        //                 ' Your Ride will be available at (' +
        //                 +selectedChoices[0].selectedValue + ') ' + selectedChoices[0].selectedText + ' Please, be here on time', function () {
        //
        //
        //                 // return app.views.main.router.navigate('/', history = true);
        //                 // return app.router.navigate('/yourbooking/');
        //             //
        //             });
        //
        //             // return;
        //
        //         }
        //         ;
        //     },
        //     function (data) {
        //         console.log("error");
        //
        //     });

    }


    app.on('pageAfterIn', function (page) {


        // console.log("Current url: ");
        // console.log(page.route.url);
        //
        // return;

        // openalert();
        if (page.route.url === '/bookings-storage/') {


            var session_check = 'session_check';
            // check php session

            app.request.post('../authenticate.php', {session_check: session_check,}, function (data) {


                    // console.log(data);

                    var x = JSON.parse(data);

                    console.log(x);

                    if (x.value == 2) {

                        var user_data = x.session_data;


                        console.log(user_data);


                        // return;

                        app.data.user.userEmail = user_data.user_email;

                        app.data.user.password = user_data.password;
                        app.data.user.userid = user_data.session_user_id;

                        console.log(app.data.user);

                        var logger_info = "you are (usermail):" + app.data.user.userEmail;
                        // console.log(app.data);
                        $$('#userinfo').html(logger_info);


                        // var logger_info =  app.data.user.userEmail;
                        //
                        // $$('#userinfo').html(logger_info);

                        jQuery("#login_li").css({
                            'visibility': 'hidden'
                        });

                        // console.log('#login_li');


                        jQuery("#logout_action").css({
                            'visibility': 'visible'
                        });


                    }

                    else {

                        app.dialog.alert('<b style="color:crimson"> Not authorised to be in this page,' +
                            ' please login with proper credentials</b>',
                            function () {

                                return app.views.main.router.navigate('/', history = true);
                                // return app.router.navigate('/home/', {reloadCurrent: false});
                            });


                    }


                },

                // error in ajax
                function () {
                    var x = JSON.parse(data);

                    console.log(x);

                    app.dialog.alert('<b style="color:crimson">' + x.message + '</b>');


                    // console.log("error");
                });
        }
        ;


        // if (app.data.user.userEmail === 'John') {
        //
        //
        //     // console.log("XXXXXXXX");
        //     app.dialog.alert('<b style="color:crimson"> Not authorised to be in this page,' +
        //         ' please login with proper credentials</b>',
        //         function () {
        //
        //             return app.views.main.router.navigate('/', history = true);
        //             // return app.router.navigate('/home/', {reloadCurrent: false});
        //         });
        //
        //
        // }
        // console.log(page);

        // console.log(page.route);

        // console.log(page.route.url=='/bookings-storage/');


        // $$('#returnDate').val();
        // var logger_info = "you are (usermail):" + app.data.user.userEmail;
        // console.log(app.data);
        // $$('#userinfo').html(logger_info);


        // document.getElementById('userInfo').html

        // do something after page gets into the view\n' +

    });


    app.on('pageReinit', function (page) {


            console.log("pageReinit event in Router Instance Events");
            // app.dialog.alert("aa");
        }
    );

    app.on('page:reinit',)

    $$(document).on('page:reinit', function (e, page) {
        console.log("rr");
        return app.views.main.router.navigate('/', history = true);
    })


    app.on('pageInit', function (page) {

        // console.log("self: ");

        var self = this;
        // var app = self.$app;
        // var fruits = self.fruits;
        // var $ = self.$;


        // Dropdown with ajax data
        self.autocompleteDropdownAll = app.autocomplete.create({
            inputEl: '#testajax',
            openIn: 'dropdown',
            preloader: true, //enable preloader
            /* If we set valueProperty to "id" then input value on select will be set according to this property */
            valueProperty: 'name', //object's "value" property name
            textProperty: 'name', //object's "text" property name
            // limit: 20, //limit to 20 results
            // typeahead: true,
            // dropdownPlaceholderText: 'Try "JavaScript"',
            source: function (query, render) {
                var autocomplete = this;
                var results = [];

                console.log("At ajax test autocomplete");

                app.request({
                    url: './js/autocomplete-languages.json',
                    method: 'GET',
                    dataType: 'json',
                    //send "query" to server. Useful in case you generate response dynamically
                    data: {
                        query: query,
                    },
                    success: function (data) {

                        // console.log(data);

                        //console.log(data.length);

                        // return;

                        autocomplete.preloaderShow();

                        for (var i = 0; i < data.length; i++) {

                            // console.log("at query.length not equal to 0");
                            // console.log(data[i].name);
                            if (data[i].name.toLowerCase().indexOf(query.toLowerCase()) >= 0)
                                results.push(data[i]);

                            // console.log(data[i]);
                            // data[i] is name and id both
                        }
                        // Hide Preoloader
                        autocomplete.preloaderHide();
                        // Render items by passing array with result items
                        render(results);


                    }
                });

            },
            on: {
                change: function (value) {
                    // console.log(value);


                    // var selectedValue = {"testajax": value};


                    selection = {
                        id: 1,
                        selectedText: value[0].name,
                        selectedValue: value[0].id,
                        autocompleteId: "testajax"
                    };
                    // alldata.push(selectedValue);


                    // console.log(selection);

                    selectedChoices[3] = selection;

                    // console.log(selectedChoices);

                },

            },
        });


        // Dropdown with all values for pickup
        self.autocompleteDropdownAll = app.autocomplete.create({

                inputEl: '#PickUPLocation_autocomplete-dropdown-all',
                openIn: 'dropdown',
                valueProperty: 'pickUpLoc', //object's "value" property name
                textProperty: 'pickUpLoc', //object's "text" property name
                source: function (query, render) {
                    var table = "pickuplocation";
                    app.request.post('../pickingLocation.php/', {table: table}, function (data) {
                            pickUpLocationValues = [];
                            pickUpLocationValues.length = 0;

                            pickUpResults = [];
                            pickUpResults.length = 0;


                            // x = JSON.parse(data);

                            // IMPORTANT for DEBUG PURPOSE, THAT YOU PRINT data FRIST BEFORE USING JSON.parse(data)
                            //console.log(data);

                            //return;

                            x = JSON.parse(data);

                            // console.log(x.value);
                            data = x.message;
                            pickUpLocations = data;

                            // console.log(destinatinoLocations);

                            pickUpLocations = JSON.parse((pickUpLocations));

                            // console.log(destinationresults.length);

                            // return;

                            var alldestinations = "";

                            $.each(pickUpLocations, function (index, onedata) {


                                pickUpLocationValues.push(onedata);
                                // results.push(data[i])

                                // pickUpLocationValues.push(onedata.pickUpLoc);
                            });

                            if (query.length === 0) {
                                // alert("at query.length ==0");
                                //means when the text field is empty.


                                //console.log(pickUpLocationValues);
                                //return;


                                for (var i = 0; i < pickUpLocationValues.length; i++) {
                                    if (pickUpLocationValues[i].pickUpLoc.toLowerCase().indexOf(query.toLowerCase()) >= 0)
                                        pickUpResults.push(pickUpLocationValues[i]);
                                }


                                // if (data[i].name.toLowerCase().indexOf(query.toLowerCase()) >= 0)
                                //     results.push(data[i]);

                                //console.log(destinationvalues);
                                // console.log(destinationvalues.length);

                                render(pickUpResults);

                                return;
                            }

                            //console.log(destinationresults.length);

                            // Find matched items

                            // console.log(pickUpLocationValues);
                            for (var i = 0; i < pickUpLocationValues.length; i++) {

                                // console.log("at query.length not equal to 0");
                                // console.log(data[i].pickUpLoc);
                                if (pickUpLocationValues[i].pickUpLoc.toLowerCase().indexOf(query.toLowerCase()) >= 0)
                                    pickUpResults.push(pickUpLocationValues[i]);
                            }
                            // Render items by passing array with result items
                            render(pickUpResults);

                            return;
                        },
                        function (data) {
                            console.log("error");

                        }
                    );


                },
                on: {
                    change: function (value) {
                        // console.log(value);

                        // var selectedValue = {"testajax": value};
                        selection = {
                            id: 2,
                            selectedText: value[0].pickUpLoc,
                            selectedValue: value[0].id,
                            autocompleteId: "PickUPLocation_autocomplete-dropdown-all"
                        };
                        // alldata.push(selectedValue);
                        // console.log(selection);

                        selectedChoices[0] = selection;

                        // console.log(selectedChoices);

                    },

                },
            }
        );

        self.autocompleteDropdownAll = app.autocomplete.create({
            inputEl: '#Destination_autocomplete-dropdown-all',
            openIn: 'dropdown',
            valueProperty: 'value', //object's "value" property name
            textProperty: 'value', //object's "text" property name
            source: function (query, render) {
                var table = "location";
                // destinationvalues=[];

                app.request.post('../functions.php/', {table: table}, function (data) {
                        destinationvalues = [];
                        destinationvalues.length = 0;

                        destinationResults = [];
                        destinationResults.length = 0;

                        // x = JSON.parse(data);

                        // IMPORTANT for DEBUG PURPOSE, THAT YOU PRINT data FRIST BEFORE USING JSON.parse(data)
                        // console.log(data);

                        x = JSON.parse(data);

                        // console.log(x.value);
                        data = x.message;
                        destinatinoLocations = data;

                        // console.log(destinatinoLocations);

                        destinatinoLocations = JSON.parse((destinatinoLocations));

                        // console.log(destinationresults.length);


                        // return;


                        var alldestinations = "";

                        $.each(destinatinoLocations, function (index, onedata) {


                            destinationvalues.push(onedata);
                            // destinationvalues.push(onedata.value);

                        });

                        // console.log(destinationvalues);
                        // console.log(destinationvalues.length);
                        if (query.length === 0) {

                            for (var i = 0; i < destinationvalues.length; i++) {
                                if (destinationvalues[i].value.toLowerCase().indexOf(query.toLowerCase()) >= 0)
                                    destinationResults.push(destinationvalues[i]);
                            }

                            render(destinationResults);

                            return;
                        }

                        //console.log(destinationresults.length);

                        // Find matched items
                        for (var i = 0; i < destinationvalues.length; i++) {
                            if (destinationvalues[i].value.toLowerCase().indexOf(query.toLowerCase()) >= 0)
                                destinationResults.push(destinationvalues[i]);
                        }
                        // Render items by passing array with result items
                        render(destinationResults);

                        return;

                    },
                    function (data) {
                        console.log("error");

                    }
                );


                //console.log(results);
            },
            on: {
                change: function (value) {
                    // console.log(value);

                    // var selectedValue = {"testajax": value};
                    selection = {
                        id: 3,
                        selectedText: value[0].value,
                        selectedValue: value[0].id,
                        autocompleteId: "Destination_autocomplete-dropdown-all"
                    };
                    // alldata.push(selectedValue);
                    // console.log(selection);

                    selectedChoices[1] = selection;

                    // console.log(selectedChoices);
                },

            },

        });

        // Dropdown with all values for car
        self.autocompleteDropdownAll = app.autocomplete.create({
            inputEl: '#Car_autocomplete-dropdown-all',
            openIn: 'dropdown',
            valueProperty: 'name', //object's "value" property name
            textProperty: 'name', //object's "text" property name
            source: function (query, render) {
                var table = "car";

                app.request.post('../cars.php/', {table: table}, function (data) {
                        carnames = [];
                        carnames.length = 0;
                        carResuls = [];
                        carResuls.length = 0;

                        // x = JSON.parse(data);

                        // IMPORTANT for DEBUG PURPOSE, THAT YOU PRINT data FRIST BEFORE USING JSON.parse(data)
                        // console.log(data);

                        x = JSON.parse(data);

                        //console.log(x);
                        data = x.message;
                        cars = data;


                        cars = JSON.parse((cars));


                        $.each(cars, function (index, onedata) {

                            carnames.push(onedata);

                        });

                        // console.log(carnames);
                        // console.log(carnames.length);

                        if (query.length === 0) {

                            // console.log(carnames);
                            // console.log(carnames.length);

                            for (var i = 0; i < carnames.length; i++) {
                                if (carnames[i].name.toLowerCase().indexOf(query.toLowerCase()) >= 0)
                                    carResuls.push(carnames[i]);
                            }

                            // console.log(carResuls);

                            // console.log(destinationresults.length);

                            render(carResuls);

                            return;
                        }

                        //console.log(destinationresults.length);

                        // Find matched items
                        for (var i = 0; i < carnames.length; i++) {
                            if (carnames[i].name.toLowerCase().indexOf(query.toLowerCase()) >= 0)
                                carResuls.push(carnames[i]);
                        }
                        // Render items by passing array with result items
                        render(carResuls);
                        // return;


                    },
                    function (data) {
                        console.log("error");

                    }
                );

                //console.log(results);
            },
            on: {
                change: function (value) {

                    console.log(value);

                    // var selectedValue = {"testajax": value};
                    selection = {
                        id: 4,
                        selectedText: value[0].name,
                        selectedValue: value[0].id,
                        autocompleteId: "Car_autocomplete-dropdown-all"
                    };
                    // alldata.push(selectedValue);
                    // console.log(selection);

                    selectedChoices[2] = selection;

                    // console.log(selectedChoices);

                },

            },
        });

    });

    app.on('pageBeforeRemove', function (page) {

        var self = this;
        // Destroy all autocompletes
        self.autocompleteDropdownAll.destroy();
    });


</script>
</body>

</html>